<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Form</title>
</head>
<body style="font-family: montserrat; background-color: #2b2b2b;">
    <style>
        #widget {
            bottom: 0;
            left: 0;
            position: fixed;
            padding: 25px;
            color: azure;
            font-size: 75px;
            font-weight: 200;
        }
    </style>
    <div style="height: 100%; display: flex; justify-content: center; align-items: center;">
        <div class="formparent" style="height: 300px; width: 600px; box-shadow: inset 0px 0px 10px 1px rgba(0,0,0,1); background-color: whitesmoke;">
            <div style="font-size: xx-large; width:100%; height:100%; display: flex; justify-content: center; align-items: center;">
                Thank you for submitting.
            </div>
        </div>
    </div>
    <div id="widget" style="font-family: 'Comfortaa', cursive;">
        <span id="weather"></span>&deg C
        <br>
        <span id="date" style="font-size: 50px; font-family: montserrat;"></span>
        <script>
            navigator.geolocation.getCurrentPosition ((position) => {
                console.log (position.coords.latitude, position.coords.longitude);
                var xhr = new XMLHttpRequest();
                xhr.addEventListener("readystatechange", function () {
                    if(this.readyState === 4) {
                        $(document).ready(() => {
                            $("#weather").ready(() => {
                                $("#weather").text(Math.round(JSON.parse(this.responseText)['main']['temp'] - 273.15));
                            })
                        })
                    }
                });
                xhr.open("GET", "https://api.openweathermap.org/data/2.5/weather?lat=" + position.coords.latitude + "&lon=" + position.coords.longitude +  "&appid=f85211722ef46bf1ad91518984bc083f");
                xhr.send();
            }, (error) => {
                var xhr = new XMLHttpRequest();
                xhr.addEventListener("readystatechange", function () {
                    if(this.readyState === 4) {
                        $(document).ready(() => {
                            $("#weather").ready(() => {
                                $("#weather").text(Math.round(JSON.parse(this.responseText)['main']['temp'] - 273.15));
                            })
                        })
                    }
                });
                xhr.open("GET", "https://api.openweathermap.org/data/2.5/weather?lat=28.7041&lon=77.1025&appid=f85211722ef46bf1ad91518984bc083f");
                xhr.send();
            });

            $(document).ready(() => {
                $("#date").ready(() => {
                    $("#date").text("Wed, 30");
                })
            });
        </script>
    </div>
</body>
</html>